# Temporal
Configurar la red temporalmente
```bash
# Agregamos una IP
ip addr add 192.168.1.254/24 dev enp0s3
# Levantamos la interfaz
ip link set enp0s3 up
# Ponemos gateway
ip route add default via 192.168.1.1 dev enp0s3
# Para ver la configuración
ip a || ip addr show enp0s3
# Para ver gateway
ip route show
```

Si necesitamos borrar una IP
```bash
ip addr del 192.168.1.254/24 dev enp0s3
```

Modificamos DNS temporales:
```bash
echo -e "nameserver 8.8.8.8\nnameserver 1.1.1.1" > /etc/resolv.conf
```

# /etc/network

```bash
# habilitamos el servicio que usa
systemctl enable networking
# Deshabilitamos el servicio de netplan que pueda dar conflicto
systemctl disable systemd-networkd
# Y lo paramos
systemctl stop systemd-networkd
```

Modificamos /etc/network/interfaces para borrar la configuración de la interfaz que queremos configurar.
```txt
auto enp0s3
iface enp0s3 inet static
	address 192.168.1.254
	gateway 192.168.1.1
	dns-nameservers 8.8.8.8 1.1.1.1
	netmask 255.255.255.0

allow-hotplug enp0s8
iface enp0s8 inet static
	address 192.168.2.254
	dns-nameservers 8.8.8.8 1.1.1.1
	netmask 255.255.255.0
```

Reiniciamos el servicio
```bash
systemctl restart networking
```

# Netplan

```bash
# Instalamos netplan
apt update && apt install netplan.io -y
# Deshabilitamos y paramos el servicio networking
systemctl disable networking ; systemctl stop networking
# Habilitamos el servicio systemd-networkd
systemctl enable systemd-networkd
# Creamos el fichero netplan
touch /etc/netplan/01-netcfg.yaml
# Los permisos deben der 600
chmod 600 /etc/netplan/01-netcfg.yaml
# Y el propietario root
chown root:root /etc/netplan/01-netcfg.yaml
# Modificamos el archivo
nano /etc/netplan/01-netcfg.yaml
```

```yaml
network:
  version: 2
  ethernets:
    enp0s3:
      addresses:
        - 192.168.1.254/24
      routes:
        - to: default
          via: 192.168.1.1
      nameservers:
        addresses: [8.8.8.8,1.1.1.1]
```

```bash
# Aplicamos configuración
netplan apply
```
